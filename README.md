# waterfall
瀑布流下拉动态加载效果

## 目录说明
|----insertPic.php        用来插入图片到数据库用 

|----insert.php

|----config.php           数据库配置文件

|----waterfallAjax.php    瀑布流动态加载数据（有图片预加载效果）

|----waterfallAjax2.php   瀑布流动态加载数据（没有图片预加载效果）

|----waterfallPHP.php     后台直接请求图片

|----uploads              保存图片的文件夹

## 核心过程
1. 首先定义需要的属性。
可以把瀑布流拆成三个部分来看：容器、列、格子
2. 初始化数据，并且计算出每行可以放下的格子的数量n = 屏幕可见区域宽度/(格子宽度+间距)。
3. 进行排序：在上一步中得到每行可以放下的格子的数量n后，把前n个格子放在第一行每一列中；然后每次寻找高度最小的一列，依次把格子放进去，并通过设置left（容器离左边的宽度+间距+格子的宽度*最低列索引）和top（间距+最低列高度）来实现定位，最后刷新新列的高度，遍历所有格子直到格子全都被排序。
4. 通过ajax请求数据，进行图片预加载。
5. 加载函数，实例化对象。
6. 下拉加载判断：当滚动条的高度+窗口可视高度==整个文档的高度时，再请求多一页数据
7. 当浏览器窗口被缩放时，进行页面重排渲染。

更多详情请查看[博客](http://xurna.github.io/2016/03/28/waterfall/)
